<!DOCTYPE html>
<html lang="cn">
    <head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0,  viewport-fit=cover" name="viewport" />
    <meta name="description" content="几道题目" />
    <meta name="hexo-theme-A4" content="v1.7.1" />
    <link rel="alternate icon" type="image/webp" href="/img/favicon.webp">
    <title>Asuka</title>

    
        
<link rel="stylesheet" href="/css/reset.css">

        
<link rel="stylesheet" href="/css/markdown.css">

        
<link rel="stylesheet" href="/css/fonts.css">
 
         <!--注意：首页既不是post也不是page-->
        
    
    
<link rel="stylesheet" href="/css/ui.css">
 
    
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 6.3.0"></head>
    
    <style>
        :root {
            --waline-theme-color: #002fa7; 
            --waline-color: #002fa7; 
            --waline-border-color: #002fa7; 
            --waline-white: #002fa7; 
            --waline-bgcolor-light: #EFCBCB;  
        }
        body {
            color: #002fa7;
            background: #EFCBCB;
        }
        .post-md code {
            background: #333333;
            color: #cbcbcb; 
        }
        .year-font-color {
            color: #002fa7 !important;
        }
        .wl-card span.wl-nick {
            color: #002fa7; 
        }
        .wl-card .wl-badge {
            border: 1px solid #002fa7;
            color: #002fa7; 
        }
        .wl-btn {
            border: 1px solid #002fa7; 
            color:  #002fa7;  
        }
        .wl-btn.primary {
            color: #EFCBCB; 
        }
        .wl-header label {
            color: #002fa7;
        }
        a {
            color: #002fa7;
        }

        .post-md a {
            color: #002fa7;
        }

        .nav li a {
            color: #002fa7;
        }

        .archive-main a:link {
            color: #002fa7;
        }
        .archive-main a:visited {
            color: #002fa7; 
        }

        .archive li span {
            color: #002fa7;
        }

        .post-main-title {
            color: #002fa7;
        }

        .post-md h1,
        .post-md h2,
        .post-md h3,
        .post-md h4,
        .post-md h5,
        .post-md h6 {
            color: #002fa7;
        }

        [data-waline] p {
            color: #002fa7;
        }
        [data-waline] a {
            color: #002fa7;
        } 
        .wl-sort li.active {
            color: #002fa7;
        }

        .wl-card .wl-meta>span {
            background: #EFCBCB;
        }

        .paper {
            background: #EFCBCB;
        }

        .index-main {
            background: #EFCBCB;
        }

        .paper-main {
            background: #EFCBCB;
        }

        .wl-panel {
            background: #EFCBCB;
        }

        .archive li:nth-child(odd) {
            background: #EFCBCB;
            ;
        }

        .archive li:nth-child(even) {
            background: #EFCBCB;
        }

        .post-md>table tr:nth-child(odd) td {
            background: #EFCBCB;
        }

        .post-md>table tr:nth-child(even) td {
            background: #EFCBCB;
        }
    </style>

    <body>
        <div class="paper">
            
            
            
            
                <div class="shadow-drop-2-bottom paper-main">
                    
<div class="header">
    <div class="header-container">
        <img style="
        width: 56px;
        height: auto;" alt="^-^" cache-control="max-age=86400" class="header-img" src="/img/favicon.webp" width="10%"></img>
        <div class="header-content">
            <a class="logo" href="/">Asuka</a> 
            <span class="description"></span> 
        </div>
        
    </div>
    
   
    <ul class="nav">
        
            
                <li><a href="/">首页</a></li>
            
        
            
                <li><a href="/list/">文章</a></li>
            
        
    </ul>
</div> 
        
                    
                    
                    
                    <!--说明是文章post页面-->
                    
                        <div class="post-main">

    
        <div class="post-main-title">
            几道题目
        </div>
      
    

    <div class="post-md">
        
            
        
        <p><font face="宋体" size=3><strong><br>1.</p>
<pre><code>查询出每个学生参加每一门科目测试的次数，结果按student_id和subject_name排序。
输入：
Students table:
+------------+--------------+
| student_id | student_name |
+------------+--------------+
| 1          | Alice        |
| 2          | Bob          |
| 13         | John         |
| 6          | Alex         |
+------------+--------------+
Subjects table:
+--------------+
| subject_name |
+--------------+
| Math         |
| Physics      |
| Programming  |
+--------------+
Examinations table:
+------------+--------------+
| student_id | subject_name |
+------------+--------------+
| 1          | Math         |
| 1          | Physics      |
| 1          | Programming  |
| 2          | Programming  |
| 1          | Physics      |
| 1          | Math         |
| 13         | Math         |
| 13         | Programming  |
| 13         | Physics      |
| 2          | Math         |
| 1          | Math         |
+------------+--------------+
输出：
+------------+--------------+--------------+----------------+
| student_id | student_name | subject_name | attended_exams |
+------------+--------------+--------------+----------------+
| 1          | Alice        | Math         | 3              |
| 1          | Alice        | Physics      | 2              |
| 1          | Alice        | Programming  | 1              |
| 2          | Bob          | Math         | 1              |
| 2          | Bob          | Physics      | 0              |
| 2          | Bob          | Programming  | 1              |
| 6          | Alex         | Math         | 0              |
| 6          | Alex         | Physics      | 0              |
| 6          | Alex         | Programming  | 0              |
| 13         | John         | Math         | 1              |
| 13         | John         | Physics      | 1              |
| 13         | John         | Programming  | 1              |
+------------+--------------+--------------+----------------+
</code></pre>
<pre><code class="sql">SELECT
    s.student_id,
    sub.subject_name,
    COUNT(e.subject_name) AS exam_count
FROM Students s
CROSS JOIN Subjects sub 
LEFT JOIN Examinations e 
ON s.student_id = e.student_id AND sub.subject_name = e.subject_name 
GROUP BY s.student_id, sub.subject_name
ORDER BY s.student_id, sub.subject_name;
</code></pre>
<p>对于前两个表的结合，应产生笛卡尔积而不是左或右；接下来left join时需要添加两个限定条件<br>据说是经典例题……其实还是不太难的，不过确实容易写错<br><br/><br>2.</p>
<pre><code>计算每台机器各自完成一个进程任务的平均耗时:指进程的&#39;end&#39;时间戳减去&#39;start&#39;时间戳。
平均耗时通过计算每台机器上所有进程任务的总耗费时间除以机器上的总进程数量获得。

输入：
Activity table:
+------------+------------+---------------+-----------+
| machine_id | process_id | activity_type | timestamp |
+------------+------------+---------------+-----------+
| 0          | 0          | start         | 0.712     |
| 0          | 0          | end           | 1.520     |
| 0          | 1          | start         | 3.140     |
| 0          | 1          | end           | 4.120     |
| 1          | 0          | start         | 0.550     |
| 1          | 0          | end           | 1.550     |
| 1          | 1          | start         | 0.430     |
| 1          | 1          | end           | 1.420     |
| 2          | 0          | start         | 4.100     |
| 2          | 0          | end           | 4.512     |
| 2          | 1          | start         | 2.500     |
| 2          | 1          | end           | 5.000     |
+------------+------------+---------------+-----------+
输出：
+------------+-----------------+
| machine_id | processing_time |
+------------+-----------------+
| 0          | 0.894           |
| 1          | 0.995           |
| 2          | 1.456           |
+------------+-----------------+
</code></pre>
<p>这也是看了题解学到的解法，实在巧妙，和Excel中某个转化为10的解法很类似（忘了）</p>
<pre><code class="sql">select machine_id, 
    round(sum(timestamp*(if(activity_type=&#39;end&#39;,1,-1))) / 
    count( distinct process_id), 3) as processing_time 
from Activity
group by machine_id
</code></pre>
<p>规避了自联结或子查询，使用正负号直接得出结果<br>当然，需要良好的数学思维，我就一辈子也想不出这种方法<br><br/><br>3.<br></strong></font></p>

    </div>

    <div class="post-meta">
        <i>
        
            <span>2023-11-19</span>
            
            
             
        
        </i>
    </div>
    
        

     
</div>



                    
                    
                    <div class="footer">
    
        <span> 
             

            
                

            
        </span>
    
</div>
<!--这是指一条线往下的内容-->
<div class="footer-last">
    
            <span>不是命运，这是我最深爱的。</span>
            
                <span class="footer-last-span-right"><i>本站由<a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/index.html">Hexo</a>驱动｜使用<a target="_blank" rel="noopener" href="https://github.com/HiNinoJay/hexo-theme-A4">Hexo-theme-A4</a>主题</i></span>
            
    
</div>


    
<link rel="stylesheet" href="/css/a11y-dark.min.css">

    
<script src="/js/highlight.min.js"></script>

    
<script src="/js/highlightjs-line-numbers.js"></script>



<script>
    hljs.initHighlightingOnLoad();
    hljs.initLineNumbersOnLoad();
</script>
                </div>
            
    </body>
</html>